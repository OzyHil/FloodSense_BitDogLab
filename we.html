<!DOCTYPE html>
<html>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>FloodSense</title>
    <script src='https://cdn.jsdelivr.net/npm/chart.js'></script>
    <style>
        body {
            font-family: sans-serif;
            background: #f0f0f0;
            padding: 20px;
            text-align: center;
        }

        .b {
            display: block;
            margin: 10px auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 5px #ccc;
            background: #fff;
            font-weight: bold;
            width: fit-content;
            max-width: 100%;
        }

        .bk {
            display: inline-block;
            vertical-align: top;
            margin: 10px;
        }

        .value {
            color: #1976d2;
            font-size: 20px;
        }

        .status {
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .Alerta {
            background: #e53935;
            color: #fff;
        }

        .Normal {
            background: #43a047;
            color: #fff;
        }

        .Atenção {
            background: #fb8c00;
            color: #fff;
        }

        button,
        input,
        select {
            padding: 6px;
            margin: 4px;
            border-radius: 5px;
            border: 1px solid #838282;
            font-size: 14px;
        }

        table {
            margin: 0 auto;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 4px 8px;
            border: 1px solid #ccc;
        }

        .tab-btn {
            margin: 10px;
            padding: 10px;
            background: #1976d2;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <h1>FloodSense Monitor</h1>

    <div>
        <button class='tab-btn' onclick="showTab('monitor')">Monitoramento</button>
        <button class='tab-btn' onclick="showTab('controle')">Controle Manual</button>
    </div>

    <div id='monitor'>

        <div class='b bk'>
            <h2>Região A</h2>
            <p class='value'>Nível: %dm</p>
            <p class='status %s'>%s</p>
        </div>

        <div class='b bk'>
            <h2>Região B</h2>
            <p class='value'>Nível: %dm</p>
            <p class='status %s'>%s</p>
        </div>

        <div class='b bk'>
            <h2>Limiares</h2>
            <table>
                <tr>
                    <th>Região</th>
                    <th>Atenção (m)</th>
                    <th>Alerta (m)</th>
                </tr>
                <tr>
                    <td>A</td>
                    <td>%d</td>
                    <td>%d</td>
                </tr>
                <tr>
                    <td>B</td>
                    <td>%d</td>
                    <td>%d</td>
                </tr>
            </table>
        </div>

        <div class='b'>
            <h2>Histórico de Níveis</h2>
            <div class='b bk'><canvas id='nivelChartA' width='300' height='200'></canvas></div>
            <div class='b bk'><canvas id='nivelChartB' width='300' height='200'></canvas></div>
        </div>

        <div class='b bk'>
            <h2>Últimos Eventos</h2>
            <table style='text-align:left;'>%s</table>
        </div>
    </div>

    <div id='controle' class='hidden'>
        <div class='b'>
            <h2>Controle Manual</h2>
            <form method='GET' action='/'>
                <label for='periferico'>Selecione:</label><br>
                <select name='periferico'>
                    <option value=''>---</option>
                    <option value='buzzer'>Buzzer</option>
                    <option value='ledG'>LED - Normal</option>
                    <option value='ledO'>LED - Atenção</option>
                    <option value='ledR'>LED - Alerta</option>
                </select><br><br>
                <button class='Normal' type='submit' name='acao' value='ligar'>Ligar</button>
                <button class='Alerta' type='submit' name='acao' value='desligar'>Desligar</button>
            </form>
        </div>
    </div>

    <script>
        function showTab(tabId) {
            document.getElementById('monitor').classList.add('hidden');
            document.getElementById('controle').classList.add('hidden');
            document.getElementById(tabId).classList.remove('hidden');
        }
            </script>
</body>

</html>